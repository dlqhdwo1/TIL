CSRF(Cross-Site Request Forgery)

- 웹 애플리케이션 보안 취약점 중 하나로, 사용자가 신뢰하는 웹 애플리케이션에 공격자가 의도하지 않은 요청을 보내게 만드는 공격이다.
- 이를 통해 공격자는 피해자의 권한으로 악의적인 작업을 수행할 수 있다.

### CSRF의 정의
- 사용자가 인증된 세션 상태에서 실행할 수 있는 요청을 공격자가 위조하여, 사용자의 의지와 상관없이 공격자가 원하는 작업을 실행하게 만드는 공격이다.

## 작동원리 
- 사용자의 인증 상태와 브라우저의 신뢰성을 악용한다.
1.인증된 세션 악용
- 사용자가 로그인한 상태에서 쿠키가 브라우저에 저장되어 있는경우, 브라우저는 동일한 도메인에 요청을 보낼 때 자동으로 쿠키를 첨부한다.
2.위조된 요청 전송
- 공격자가 위조된 요청을 사용자의 브라우저를 통해 실행하게 만든다. 

## 공격 시나리오

1.사용자가 example.com에 로그인한다. 로그인 후 세션 쿠키가 브라우저에 저장된다.
2.공격자가 악의적인 웹사이트 malicious.com을 만들고, CSRF공격 코드를 포함한 HTML을 삽입한다. 
3.사용자가 malicious.com을 방문하면, 브라우저는 자동으로 example.com에 쿠키를 포함하여 요청을 보낸다. 그 이유는 이미지의 src를 통해 example.com페이지에 접근을 하기 떄문임.
4.결과적으로 example.com서버는 요청을 정당한 사용자로부터 온 것으로 처리하고, 공격자가 원하는 작업이 수행된다.

## 주요피해
- 계좌이체
- 비밀번호변경
- 데이터삭제
- 관리자권한악용

## CSRF방어방법
- CSRF Token사용
  - 서버가 클라이언트에 고유한 토큰을 발급합니다.
  - 클라이언트는 모든 요청에 이 토큰을 포함해야한다.
  - 서버는 요청 시 해당 토큰이 유효한지 검증한다. 






